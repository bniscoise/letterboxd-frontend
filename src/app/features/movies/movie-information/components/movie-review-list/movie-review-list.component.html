@if (loading) {
<div
  class="flex items-center justify-center gap-3 rounded-lg border border-dashed border-monokai-border bg-monokai-surface-highlight/60 py-6 text-monokai-muted"
>
  <div
    class="h-8 w-8 animate-spin rounded-full border-2 border-monokai-border border-t-monokai-accent"
  ></div>
  <span>Chargement des critiques...</span>
</div>
} @else if (reviews.length === 0) {
<div
  class="rounded-lg border border-dashed border-monokai-border bg-monokai-surface-highlight/60 p-6 text-center text-sm text-monokai-muted"
>
  <p>Aucune critique n’a encore été publiée pour ce film.</p>
</div>
} @else {
<section class="space-y-4">
  <h2 class="text-xl font-semibold text-monokai-text">Critiques des utilisateurs</h2>

  <ul class="space-y-4">
    @for (review of reviews; track review.userId) {
    <li
      class="rounded-xl border border-monokai-border bg-monokai-surface-highlight/70 p-5 shadow transition hover:shadow-monokai"
    >
      <div class="flex flex-wrap items-start justify-between gap-3">
        <div class="space-y-1">
          <p class="text-sm text-monokai-muted">
            Critique par {{ review.username || 'Utilisateur #' + review.userId }}
          </p>
          <div class="flex items-center gap-2">
            <span class="text-sm text-monokai-muted">Note&nbsp;:</span>
            <app-rating-stars
              [rating]="review.rating ?? 0"
              [readonly]="true"
              [size]="20"
            ></app-rating-stars>
            <span class="text-sm text-monokai-yellow">{{ review.rating ?? '—' }}/5</span>
          </div>
        </div>
      </div>

      <div
        class="mt-3 rounded-lg border border-monokai-border bg-monokai-surface p-4 text-sm text-monokai-text whitespace-pre-line"
      >
        {{ review.review || 'Aucune critique rédigée.' }}
      </div>
    </li>
    }
  </ul>
</section>
}
